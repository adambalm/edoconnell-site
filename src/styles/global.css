/*
 * Design Token Foundation — edoconnell.org
 *
 * New design system. Borrows discipline (typographic scale, spacing rhythm,
 * semantic structure) from the sca-explainers project, not its visual identity.
 *
 * Palette and aesthetic deferred to design phase. These tokens establish
 * the system that a designer (human or agent) will populate.
 */

:root {
  /* Typography scale — major third (1.25) */
  --font-size-xs: 0.8rem;
  --font-size-sm: 0.875rem;
  --font-size-base: 1rem;
  --font-size-md: 1.125rem;
  --font-size-lg: 1.25rem;
  --font-size-xl: 1.563rem;
  --font-size-2xl: 1.953rem;
  --font-size-3xl: 2.441rem;

  /* Font stacks — serif for prose, system sans for UI */
  --font-prose: 'Source Serif 4', Georgia, 'Times New Roman', serif;
  --font-ui: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif;
  --font-mono: 'JetBrains Mono', 'Cascadia Code', 'Fira Code', Consolas, monospace;

  /* Line heights */
  --leading-tight: 1.25;
  --leading-normal: 1.6;
  --leading-loose: 1.8;

  /* Spacing scale — based on 0.5rem increments */
  --space-1: 0.25rem;
  --space-2: 0.5rem;
  --space-3: 0.75rem;
  --space-4: 1rem;
  --space-6: 1.5rem;
  --space-8: 2rem;
  --space-12: 3rem;
  --space-16: 4rem;
  --space-24: 6rem;

  /* Layout */
  --measure: 65ch;
  --page-max: 72rem;
  --page-gutter: var(--space-6);

  /* Colors — neutral foundation, refined at design phase */
  --color-text: #1a1a1a;
  --color-text-muted: #555;
  --color-bg: #fafaf8;
  --color-bg-subtle: #f0efe9;
  --color-border: #d4d0c8;
  --color-accent: #8B2635;
  --color-accent-hover: #6b1d29;
  --color-text-tertiary: #71717a;
  --color-bg-secondary: #ffffff;
  --color-accent-subtle: rgba(139, 38, 53, 0.06);
  --color-surface: #ffffff;

  /* Category colors — kind-specific accents for article cards */
  --color-kind-brief: #2563EB;
  --color-kind-brief-subtle: rgba(37, 99, 235, 0.08);
  --color-kind-essay: #92400E;
  --color-kind-essay-subtle: rgba(146, 64, 14, 0.08);
  --color-kind-case-study: #0f766e;
  --color-kind-case-study-subtle: rgba(15, 118, 110, 0.08);

  /* Focus */
  --focus-ring: 2px solid var(--color-accent);
  --focus-offset: 2px;
}

[data-theme="dark"] {
  --color-text: #e4e4e7;
  --color-text-muted: #a1a1aa;
  --color-text-tertiary: #71717a;
  --color-bg: #18181b;
  --color-bg-subtle: #27272a;
  --color-bg-secondary: #111111;
  --color-border: #3f3f46;
  --color-accent: #c26a75;
  --color-accent-hover: #d4838d;
  --color-accent-subtle: rgba(194, 106, 117, 0.12);
  --color-surface: #1f1f23;
  --color-kind-brief: #60A5FA;
  --color-kind-brief-subtle: rgba(96, 165, 250, 0.12);
  --color-kind-essay: #FBBF24;
  --color-kind-essay-subtle: rgba(251, 191, 36, 0.12);
  --color-kind-case-study: #5eead4;
  --color-kind-case-study-subtle: rgba(94, 234, 212, 0.12);
}

@media (prefers-color-scheme: dark) {
  :root:not([data-theme="light"]) {
    --color-text: #e4e4e7;
    --color-text-muted: #a1a1aa;
    --color-text-tertiary: #71717a;
    --color-bg: #18181b;
    --color-bg-subtle: #27272a;
    --color-bg-secondary: #111111;
    --color-border: #3f3f46;
    --color-accent: #c26a75;
    --color-accent-hover: #d4838d;
    --color-accent-subtle: rgba(194, 106, 117, 0.12);
    --color-surface: #1f1f23;
    --color-kind-brief: #60A5FA;
    --color-kind-brief-subtle: rgba(96, 165, 250, 0.12);
    --color-kind-essay: #FBBF24;
    --color-kind-essay-subtle: rgba(251, 191, 36, 0.12);
    --color-kind-case-study: #5eead4;
    --color-kind-case-study-subtle: rgba(94, 234, 212, 0.12);
  }
}

::selection {
  background: var(--color-accent);
  color: #fff;
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Base reset */
*,
*::before,
*::after {
  box-sizing: border-box;
  margin: 0;
}

html {
  font-size: 100%;
  -webkit-text-size-adjust: 100%;
}

body {
  font-family: var(--font-prose);
  font-size: var(--font-size-base);
  line-height: var(--leading-normal);
  color: var(--color-text);
  background-color: var(--color-bg);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Prose measure constraint */
p,
li,
blockquote {
  max-width: var(--measure);
}

/* Heading scale */
h1 { font-size: var(--font-size-3xl); line-height: var(--leading-tight); }
h2 { font-size: var(--font-size-2xl); line-height: var(--leading-tight); }
h3 { font-size: var(--font-size-xl); line-height: var(--leading-tight); }
h4 { font-size: var(--font-size-lg); line-height: var(--leading-tight); }

h1, h2, h3, h4 {
  font-family: var(--font-ui);
  font-weight: 600;
}

/* Links */
a {
  color: var(--color-accent);
  text-decoration-thickness: 1px;
  text-underline-offset: 0.15em;
}

a:hover {
  color: var(--color-accent-hover);
}

/* Focus visible */
:focus-visible {
  outline: var(--focus-ring);
  outline-offset: var(--focus-offset);
}

/* Skip navigation */
.skip-link {
  position: absolute;
  top: -100%;
  left: var(--space-4);
  z-index: 100;
  padding: var(--space-2) var(--space-4);
  background: var(--color-text);
  color: var(--color-bg);
  font-family: var(--font-ui);
  font-size: var(--font-size-sm);
  text-decoration: none;
  border-radius: 0 0 4px 4px;
}

.skip-link:focus {
  top: 0;
}

/* Utility: visually hidden but accessible */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

/* Code */
code {
  font-family: var(--font-mono);
  font-size: 0.9em;
  background: var(--color-bg-subtle);
  padding: 0.1em 0.3em;
  border-radius: 3px;
}

pre code {
  background: none;
  padding: 0;
}
